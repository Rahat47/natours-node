{"mappings":"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","sources":["public/js/index.js","public/js/login.js","public/js/alerts.js","public/js/mapbox.js"],"sourcesContent":["import '@babel/polyfill';\r\nimport { login } from \"./login\";\r\nimport initMap from './mapbox';\r\n\r\n// Get the form for login page\r\nconst form = document.querySelector('.form');\r\n\r\n// get the map from the DOM\r\nconst map = document.getElementById('map');\r\n\r\n// get the locations from the map data\r\nconst tourLocations = map ? JSON.parse(map.dataset.locations) : [];\r\n\r\nif (tourLocations.length) {\r\n    initMap(tourLocations);\r\n}\r\n\r\nif (form) {\r\n    form.addEventListener('submit', (e) => {\r\n        e.preventDefault();\r\n\r\n        const email = document.getElementById('email').value;\r\n        const password = document.getElementById('password').value;\r\n\r\n        login(email, password);\r\n    })\r\n}\r\n","import axios from 'axios';\r\nimport { showAlert } from './alerts';\r\n\r\nexport const login = async (email, password) => {\r\n    try {\r\n        const res = await axios({\r\n            method: 'post',\r\n            url: 'http://localhost:5000/api/v1/users/login',\r\n            data: {\r\n                email,\r\n                password\r\n            }\r\n        })\r\n\r\n        if (res.data.status === 'success') {\r\n            showAlert('success', 'Logged in successfully');\r\n            window.setTimeout(() => {\r\n                location.assign('/');\r\n            }, 1500);\r\n        }\r\n\r\n    } catch (error) {\r\n        showAlert('error', error.response.data.message);\r\n    }\r\n}\r\n","export const showAlert = (type, message) => {\r\n    hideAlert()\r\n\r\n    const markup = `\r\n        <div class=\"alert alert--${type}\"> ${message} </div>\r\n    `\r\n    document.querySelector('body').insertAdjacentHTML('afterbegin', markup)\r\n\r\n    setTimeout(hideAlert, 5000)\r\n}\r\n\r\nexport const hideAlert = () => {\r\n    const alert = document.querySelector('.alert')\r\n    if (alert) {\r\n        alert.remove()\r\n    }\r\n}","export default function initMap(locations) {\r\n    mapboxgl.accessToken = 'pk.eyJ1IjoicmFoYXQ0NyIsImEiOiJja3YzemM1bXUwaXQ2Mm5waGRvc2lxejFwIn0.uv1f-__4h-6T_lnCe_FQFw';\r\n\r\n    const map = new mapboxgl.Map({\r\n        container: 'map',\r\n        style: 'mapbox://styles/rahat47/ckv402emd2hoj15mpyiibmts2',\r\n        scrollZoom: false,\r\n    });\r\n\r\n\r\n    // make sure the map is fully loaded before adding the line\r\n    map.on('load', () => {\r\n        // Create bounds\r\n        const bounds = new mapboxgl.LngLatBounds();\r\n\r\n        locations.forEach(loc => {\r\n            // Add a marker\r\n            const el = document.createElement('div');\r\n            el.className = 'marker';\r\n\r\n            // Add marker\r\n            new mapboxgl.Marker({\r\n                element: el,\r\n                anchor: 'bottom'\r\n            })\r\n                .setLngLat(loc.coordinates)\r\n                .addTo(map);\r\n\r\n            // Add popup\r\n            new mapboxgl.Popup({\r\n                offset: 30\r\n            })\r\n                .setLngLat(loc.coordinates)\r\n                .setHTML(`<p>Day ${loc.day}: ${loc.description}</p>`)\r\n                .addTo(map);\r\n\r\n            bounds.extend(loc.coordinates);\r\n        })\r\n\r\n        map.fitBounds(bounds, {\r\n            padding: {\r\n                top: 200,\r\n                bottom: 200,\r\n                left: 100,\r\n                right: 100\r\n            }\r\n        });\r\n\r\n        // join each location with a line\r\n        const route = locations.map(loc => loc.coordinates);\r\n\r\n        // add the line to the map\r\n        map.addLayer({\r\n            id: 'route',\r\n            type: 'line',\r\n            source: {\r\n                type: 'geojson',\r\n                data: {\r\n                    type: 'Feature',\r\n                    properties: {},\r\n                    geometry: {\r\n                        type: 'LineString',\r\n                        coordinates: route\r\n                    }\r\n                }\r\n            },\r\n            layout: {\r\n                'line-join': 'round',\r\n                'line-cap': 'round'\r\n            },\r\n            paint: {\r\n                'line-color': '#888',\r\n                'line-width': 8\r\n            }\r\n        });\r\n\r\n        // Add zoom and rotation controls to the map.\r\n        map.addControl(new mapboxgl.NavigationControl());\r\n\r\n\r\n        // Add geolocate control to the map.\r\n        map.addControl(new mapboxgl.GeolocateControl({\r\n            positionOptions: {\r\n                enableHighAccuracy: true\r\n            },\r\n            trackUserLocation: true\r\n        }));\r\n\r\n    });\r\n\r\n}\r\n\r\n"],"names":[],"version":3,"file":"index.js.map","sourceRoot":"/"}